# === 模块一配置 ===
parser:
  input_dir: "./data"
  output_dir: "./output"
  file_extensions: [".md", ".markdown"]  # 文件后缀白名单
  chunk_strategy:
    max_chars: 450
    overlap_rows: 1

tags:
  prefix: "?"
  exclude_regex:
    - "^#ignore/.*"
    - "^#temp$"

# === 模块二配置 ===
vector_store:
  provider: "chromadb" # 或 openai, milvus
  collection_name: "knowledge_base"
  dimension: 1024
  batch_size: 16
  embedding:
    api_base: "your api url"
    # api_key 优先从配置文件读取，其次使用环境变量 OPENAI_API_KEY
    api_key: "your api_key"
    model: "your model"
    # API速率限制配置 (RPM: 每分钟请求数, TPM: 每分钟令牌数)
    # 默认值基于SiliconFlow免费账户限制，可根据需要调整
    rate_limit:
      rpm: 1800       # 每分钟最多10个请求 (免费账户限制)
      tpm: 450000     # 每分钟最多10000个令牌
      # 启用自适应延迟以避免触发限制
      enable_adaptive_delay: true
      # 初始延迟（秒）在请求之间
      request_delay: 0.5
  chromadb:
    persist_directory: "./chroma_db"
    collection_name: "tag_rag_vectors"

# === 日志配置 ===
logging:
  # 日志级别: DEBUG, INFO, WARNING, ERROR
  level: "INFO"
  # 日志格式
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  # 处理器配置
  handlers:
    console:
      enabled: true
      level: "INFO"
    file:
      enabled: true
      path: "./logs/tag_rag.log"
      # 结合大小(100MB)和时间(每天)轮转
      max_bytes: 104857600  # 100MB
      backup_count: 7       # 保留7天
      when: "midnight"      # 每天轮转
