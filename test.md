#project/聊斋志 

阴阳骰子+5手卡（+1）在各难度下的成功率探索
## promt
#type/提示词
我在设计一款桌游规则, 现在需要构筑数学模型. 有这么几种资源: 
- 明骰的3颗D6, 投掷结果已知; 
- 暗骰的1颗D6, 投掷结果未知(意味着分配+1指示物后再投掷结果, 可能导致消耗了资源却不满足要求); 
- 5个+1指示物, 可以使得骰子结果额外+1(可以超过6). 
当前目标: 单个组合的结果>=7
流程如下: 
1. 玩家将资源任意分组组合(例如, 明骰的三颗骰子是3,4,6, 分配成3组资源, 分别是3的明骰+4的明骰; 6的明骰和1个指示物, 暗骰和4个指示物)
2. 投掷暗骰(接之前的例子, 暗骰结果为1)
3. 计算满足目标的组合数量 (因为1的暗骰和四个指示物的组合最终结果为5, 不满足目标, 最后只有2组组合满足条件; 但如果暗骰结果为3, 则最终结果为7, 满足条件)

追求组合数量尽可能的多, 这种情况下, 最优解和组合数的期望是多少

## 期望
#type/输出结果

|  目标值   | 3已知+1未知 (期望) | 2已知+2未知 (期望) | 1已知+3未知 (期望) |
| :----: | :----------: | :----------: | :----------: |
| **7**  |    ~2.21     |    ~1.94     |    ~1.67     |
| **8**  |    ~1.61     |    ~1.40     |    ~1.22     |
| **9**  |    ~1.16     |    ~1.03     |    ~0.91     |
| **10** |    ~0.92     |    ~0.82     |    ~0.73     |
| **11** |    ~0.72     |    ~0.65     |    ~0.59     |
| **12** |    ~0.56     |    ~0.51     |    ~0.47     |
| **13** |    ~0.42     |    ~0.38     |    ~0.35     |

## 方差

### dc7，3k1u

难度7, 3k+1u下, 能至少2个组合的概率是多少?
**70.1%**
#### 计算逻辑

1. **遍历所有已知骰子组合：** 运行我的穷举模型，遍历216种（或56种加权）已知骰子投掷结果。
2. **获取每个组合的“最优策略”：** 对于每一种投掷结果（例如 `{1,2,3}`），模型已经找到了使其期望收益最大的最优策略（即，特定的分组方式和指示物分配方案）。
3. **计算该策略下“>=2组合”的概率：**
    - 这个策略会将资源分成“确定组”和“风险组”。
    - **确定组的数量 (S)：** 这是固定的，不会变。
    - **风险组的成功概率 (P)：** 这是由投入的指示物决定的。风险组最多只有1个（因为最优策略总会将未知骰子放在一个独立的组里）。
    - 现在，我们需要计算最终成功组合数 `C = S + (风险组是否成功)` 大于等于2的概率。
        - **如果 S >= 2：** 那么无论风险组是否成功，最终组合数都至少是2。概率是 **100%**。
        - **如果 S = 1：** 那么需要风险组成功，最终组合数才能达到2。概率就是风险组的成功概率 **P**。
        - **如果 S = 0：** 那么即使风险组成功，最终也只有1个组合，不可能达到2。概率是 **0%**。
4. **加权平均：** 将每种已知骰子投掷结果（216种）所对应的“>=2组合”的概率相加，然后除以216，得到最终的总概率。

